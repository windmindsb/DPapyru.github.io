<!DOCTYPE html>
<!-- å¢å¼ºç‰ˆæ–‡ä»¶å¤¹å†…å®¹æ˜¾ç¤ºé¡µé¢ -->
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡ä»¶å¤¹å†…å®¹ - æ³°æ‹‰ç‘äºšModåˆ¶ä½œæ•™ç¨‹</title>
    
    <!-- SEOä¼˜åŒ–æ ‡ç­¾ -->
    <meta name="description" content="æ³°æ‹‰ç‘äºšModåˆ¶ä½œæ•™ç¨‹æ–‡æ¡£æ–‡ä»¶å¤¹å†…å®¹ï¼Œæä¾›ç‰¹å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡æ¡£åˆ—è¡¨">
    <meta name="keywords" content="æ³°æ‹‰ç‘äºš,Mod,æ•™ç¨‹,æ–‡æ¡£,æ–‡ä»¶å¤¹,tModLoader">
    <meta name="author" content="æ³°æ‹‰ç‘äºšModç¤¾åŒº">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graphæ ‡ç­¾ -->
    <meta property="og:title" content="æ–‡ä»¶å¤¹å†…å®¹ - æ³°æ‹‰ç‘äºšModåˆ¶ä½œæ•™ç¨‹">
    <meta property="og:description" content="æ³°æ‹‰ç‘äºšModåˆ¶ä½œæ•™ç¨‹æ–‡æ¡£æ–‡ä»¶å¤¹å†…å®¹ï¼Œæä¾›ç‰¹å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡æ¡£åˆ—è¡¨">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dpapyru.github.io/docs/folder-enhanced.html">
    
    <!-- ä¸»é¢˜åˆ‡æ¢è„šæœ¬ - æ—©æœŸåŠ è½½ä»¥é¿å…é—ªçƒ -->
    <script>
        // ä¸»é¢˜åˆ‡æ¢æ—©æœŸåŠ è½½è„šæœ¬ - é˜²æ­¢é¡µé¢åŠ è½½æ—¶ä¸»é¢˜é—ªçƒ
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>
    
    <!-- æ ·å¼å’Œå›¾æ ‡ -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/prism.min.css">
    <link rel="stylesheet" href="../assets/css/vs2022-theme.css">
    <link rel="icon" type="image/png" href="../assets/imgs/Green_tModLoader.png">
    
    <!-- è‡ªå®šä¹‰æ ·å¼ -->
    <style>
        /* æ–‡ä»¶å¤¹é¡µé¢ç‰¹å®šæ ·å¼ */
        .folder-hero {
            background: linear-gradient(0deg, #155724, #28a745,#155724);
            color: white;
            padding: 40px 0;
            text-align: center;
        }
        
        .folder-hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .folder-hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 30px;
            line-height: 1.6;
        }
        
        .breadcrumb {
            background-color: #f8f9fa;
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .breadcrumb-nav {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            font-size: 0.9rem;
        }
        
        .breadcrumb-item {
            display: flex;
            align-items: center;
        }
        
        .breadcrumb-item:not(:last-child)::after {
            content: "â€º";
            margin: 0 10px;
            color: #6c757d;
        }
        
        .breadcrumb-item a {
            color: #007bff;
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        .breadcrumb-item a:hover {
            color: #0056b3;
            text-decoration: underline;
        }
        
        .breadcrumb-item.active {
            color: #6c757d;
            font-weight: 500;
        }
        
        .folder-content {
            padding: 40px 0;
        }
        
        .folder-header {
            margin-bottom: 30px;
            text-align: center;
        }
        
        .folder-title {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #333;
        }
        
        .folder-description {
            font-size: 1.1rem;
            color: #666;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .filter-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            min-width: 150px;
        }
        
        .filter-group label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }
        
        .filter-select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #fff;
            font-size: 0.9rem;
            outline: none;
            transition: border-color 0.3s ease;
        }
        
        .filter-select:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }
        
        .view-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: auto;
        }
        
        .view-toggle button {
            background: none;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 6px 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .view-toggle button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .search-section {
            background-color: #f8f9fa;
            padding: 30px 0;
            border-radius: 8px;
            margin-bottom: 40px;
        }
        
        .search-container {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 1px solid #ddd;
            border-radius: 50px;
            font-size: 1rem;
            outline: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.15);
        }
        
        .search-button {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .search-button:hover {
            background-color: #0056b3;
        }
        
        .search-history {
            margin-top: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .search-history-title {
            width: 100%;
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .search-history-item {
            background-color: #e9ecef;
            color: #495057;
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .search-history-item:hover {
            background-color: #dee2e6;
        }
        
        .doc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .doc-grid.list-view {
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        .doc-card {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .doc-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .doc-card-header {
            padding: 20px;
            border-bottom: 1px solid #f1f3f4;
        }
        
        .doc-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }
        
        .doc-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            font-size: 0.85rem;
            color: #666;
        }
        
        .doc-meta-item {
            display: flex;
            align-items: center;
        }
        
        .difficulty-badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .difficulty-badge.beginner {
            background-color: #d4edda;
            color: #155724;
        }
        
        .difficulty-badge.intermediate {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .difficulty-badge.advanced {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .doc-card-body {
            padding: 20px;
        }
        
        .doc-description {
            font-size: 0.95rem;
            color: #555;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .doc-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .doc-tag {
            background-color: #e9ecef;
            color: #495057;
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        .doc-card-footer {
            padding: 15px 20px;
            background-color: #f8f9fa;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .doc-author {
            font-size: 0.9rem;
            color: #666;
        }
        
        .doc-link {
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: background-color 0.2s ease;
        }
        
        .doc-link:hover {
            background-color: #0056b3;
        }
        
        .no-docs {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .no-docs-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .no-docs h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .no-docs p {
            font-size: 1rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .back-to-docs {
            text-align: center;
            margin-top: 40px;
        }
        
        .back-to-docs .btn {
            display: inline-block;
            background-color: #6c757d;
            color: white;
            padding: 12px 25px;
            border-radius: 4px;
            text-decoration: none;
            font-size: 1rem;
            transition: background-color 0.2s ease;
        }
        
        .back-to-docs .btn:hover {
            background-color: #5a6268;
        }
        
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #fff;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }
        
        .search-result-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .search-result-item:hover {
            background-color: #f8f9fa;
        }
        
        .search-result-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .search-result-meta {
            font-size: 0.85rem;
            color: #666;
        }
        
        .advanced-search-toggle {
            margin-top: 10px;
            text-align: center;
        }
        
        .advanced-search-toggle button {
            background: none;
            border: none;
            color: #007bff;
            cursor: pointer;
            font-size: 0.9rem;
            text-decoration: underline;
        }
        
        .advanced-search-options {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .advanced-search-options.active {
            display: block;
        }
        
        .advanced-search-row {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .advanced-search-group {
            flex: 1;
        }
        
        .advanced-search-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .advanced-search-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .folder-hero h1 {
                font-size: 2rem;
            }
            
            .folder-hero p {
                font-size: 1rem;
            }
            
            .doc-grid {
                grid-template-columns: 1fr;
            }
            
            .folder-title {
                font-size: 1.5rem;
            }
            
            .filter-container {
                flex-direction: column;
            }
            
            .view-toggle {
                margin-left: 0;
                margin-top: 10px;
            }
            
            .advanced-search-row {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <!-- ç½‘ç«™å¤´éƒ¨å¯¼èˆªåŒºåŸŸ -->
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <!-- ç½‘ç«™logoå’Œæ ‡é¢˜ -->
                <div class="logo">
                    <a href="../index.html">
                        <img src="../assets/imgs/Green_tModLoader.png" alt="æ³°æ‹‰ç‘äºšModåˆ¶ä½œæ•™ç¨‹" class="logo-image">
                        <h1 class="site-title">æ³°æ‹‰ç‘äºšModåˆ¶ä½œæ•™ç¨‹</h1>
                    </a>
                </div>
                <!-- ä¸»å¯¼èˆªèœå• -->
                <nav class="main-nav">
                    <ul class="nav-list">
                        <li class="nav-item"><a href="../index.html" class="nav-link">é¦–é¡µ</a></li>
                        <li class="nav-item"><a href="index.html" class="nav-link">æ–‡æ¡£</a></li>
                        <li class="nav-item"><a href="viewer.html" class="nav-link active">æ–‡æ¡£æŸ¥çœ‹å™¨</a></li>
                        <li class="nav-item"><a href="https://github.com/DPapyru/DPapyru.github.io" class="nav-link"
                                target="_blank">GitHub</a></li>
                    </ul>
                </nav>
                <!-- ç§»åŠ¨ç«¯èœå•åˆ‡æ¢æŒ‰é’® -->
                <button class="mobile-menu-toggle" aria-label="åˆ‡æ¢èœå•">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- æ–‡ä»¶å¤¹é¡µé¢ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main>
        <!-- é¢åŒ…å±‘å¯¼èˆª -->
        <section class="breadcrumb">
            <div class="container">
                <nav class="breadcrumb-nav" id="breadcrumb">
                    <!-- é¢åŒ…å±‘å¯¼èˆªå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </nav>
            </div>
        </section>

        <!-- æ–‡ä»¶å¤¹è‹±é›„åŒºåŸŸ -->
        <section class="folder-hero">
            <div class="container">
                <h1>æ–‡ä»¶å¤¹å†…å®¹</h1>
                <p>æµè§ˆç‰¹å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡æ¡£ï¼Œå¿«é€Ÿæ‰¾åˆ°æ‚¨éœ€è¦çš„å­¦ä¹ èµ„æº</p>
            </div>
        </section>

        <!-- æ–‡ä»¶å¤¹å†…å®¹åŒºåŸŸ -->
        <section class="folder-content">
            <div class="container">
                <!-- æ–‡ä»¶å¤¹æ ‡é¢˜å’Œæè¿° -->
                <div class="folder-header" id="folder-header">
                    <!-- æ–‡ä»¶å¤¹æ ‡é¢˜å’Œæè¿°å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>

                <!-- è¿‡æ»¤å™¨å’Œæœç´¢åŒºåŸŸ -->
                <div class="search-section">
                    <div class="filter-container">
                        <div class="filter-group">
                            <label for="difficulty-filter">éš¾åº¦:</label>
                            <select id="difficulty-filter" class="filter-select">
                                <option value="all">å…¨éƒ¨çº§åˆ«</option>
                                <option value="beginner">åˆçº§</option>
                                <option value="intermediate">ä¸­çº§</option>
                                <option value="advanced">é«˜çº§</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="category-filter">åˆ†ç±»:</label>
                            <select id="category-filter" class="filter-select">
                                <option value="all">å…¨éƒ¨åˆ†ç±»</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="author-filter">ä½œè€…:</label>
                            <select id="author-filter" class="filter-select">
                                <option value="all">å…¨éƒ¨ä½œè€…</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="sort-filter">æ’åº:</label>
                            <select id="sort-filter" class="filter-select">
                                <option value="order">æŒ‰é¡ºåº</option>
                                <option value="title">æŒ‰æ ‡é¢˜</option>
                                <option value="author">æŒ‰ä½œè€…</option>
                                <option value="last_updated">æŒ‰æ›´æ–°æ—¶é—´</option>
                            </select>
                        </div>
                        <div class="view-toggle">
                            <button id="grid-view-btn" class="active">ç½‘æ ¼è§†å›¾</button>
                            <button id="list-view-btn">åˆ—è¡¨è§†å›¾</button>
                        </div>
                    </div>
                    <div class="search-container">
                        <input type="text" id="doc-search" class="search-input" placeholder="æœç´¢æ­¤æ–‡ä»¶å¤¹ä¸‹çš„æ–‡æ¡£..." autocomplete="off">
                        <button class="search-button" id="search-btn">ğŸ”</button>
                        <div class="search-results" id="search-results"></div>
                    </div>
                    
                    <!-- æœç´¢å†å² -->
                    <div class="search-history" id="search-history">
                        <div class="search-history-title">æœ€è¿‘æœç´¢:</div>
                        <!-- æœç´¢å†å²é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    
                    <!-- é«˜çº§æœç´¢é€‰é¡¹ -->
                    <div class="advanced-search-toggle">
                        <button id="advanced-search-toggle-btn">é«˜çº§æœç´¢é€‰é¡¹</button>
                    </div>
                    <div class="advanced-search-options" id="advanced-search-options">
                        <div class="advanced-search-row">
                            <div class="advanced-search-group">
                                <label for="title-search">æ ‡é¢˜åŒ…å«:</label>
                                <input type="text" id="title-search" class="advanced-search-input" placeholder="æ–‡æ¡£æ ‡é¢˜">
                            </div>
                            <div class="advanced-search-group">
                                <label for="content-search">å†…å®¹åŒ…å«:</label>
                                <input type="text" id="content-search" class="advanced-search-input" placeholder="æ–‡æ¡£å†…å®¹">
                            </div>
                        </div>
                        <div class="advanced-search-row">
                            <div class="advanced-search-group">
                                <label for="tag-search">æ ‡ç­¾åŒ…å«:</label>
                                <input type="text" id="tag-search" class="advanced-search-input" placeholder="æ–‡æ¡£æ ‡ç­¾">
                            </div>
                            <div class="advanced-search-group">
                                <label for="date-from">æ›´æ–°æ—¶é—´ä»:</label>
                                <input type="date" id="date-from" class="advanced-search-input">
                            </div>
                        </div>
                        <div class="advanced-search-row">
                            <div class="advanced-search-group">
                                <label for="date-to">æ›´æ–°æ—¶é—´åˆ°:</label>
                                <input type="date" id="date-to" class="advanced-search-input">
                            </div>
                            <div class="advanced-search-group">
                                <button id="advanced-search-btn" class="btn btn-primary">æ‰§è¡Œé«˜çº§æœç´¢</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ–‡æ¡£åˆ—è¡¨ -->
                <div class="doc-grid" id="doc-grid">
                    <!-- æ–‡æ¡£å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>

                <!-- æ— æ–‡æ¡£æç¤º -->
                <div class="no-docs" id="no-docs" style="display: none;">
                    <div class="no-docs-icon">ğŸ“‚</div>
                    <h3>è¯¥æ–‡ä»¶å¤¹ä¸‹æš‚æ— æ–‡æ¡£</h3>
                    <p>å½“å‰æ–‡ä»¶å¤¹ä¸‹æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æ–‡æ¡£ï¼Œæˆ–è€…è¯¥æ–‡ä»¶å¤¹ä¸å­˜åœ¨ã€‚</p>
                </div>

                <!-- è¿”å›æ–‡æ¡£é¦–é¡µé“¾æ¥ -->
                <div class="back-to-docs">
                    <a href="index.html" class="btn">è¿”å›æ–‡æ¡£é¦–é¡µ</a>
                </div>
            </div>
        </section>
    </main>

    <!-- ç½‘ç«™åº•éƒ¨åŒºåŸŸ -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>å…³äºé¡¹ç›®</h4>
                    <p>è¿™æ˜¯ä¸€ä¸ªé¢å‘æ³°æ‹‰ç‘äºšModå¼€å‘è€…çš„åä½œæ•™ç¨‹é¡¹ç›®ï¼Œæ—¨åœ¨é™ä½Modåˆ¶ä½œé—¨æ§›ã€‚</p>
                </div>
                <div class="footer-section">
                    <h4>å¿«é€Ÿé“¾æ¥</h4>
                    <ul>
                        <li><a href="../index.html">é¦–é¡µ</a></li>
                        <li><a href="index.html">æ–‡æ¡£</a></li>
                        <li><a href="viewer.html">æ–‡æ¡£æŸ¥çœ‹å™¨</a></li>
                        <li><a href="https://github.com/DPapyru/DPapyru.github.io" target="_blank">GitHub</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>è”ç³»æˆ‘ä»¬</h4>
                    <ul>
                        <li><a href="https://github.com/DPapyru/DPapyru.github.io" target="_blank">GitHub</a></li>
                        <li><a href="mailto:contact@example.com">é‚®ç®±</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 æ³°æ‹‰ç‘äºšModåˆ¶ä½œæ•™ç¨‹. é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC
                        BY 4.0</a> è®¸å¯åè®®ã€‚</p>
            </div>
        </div>
    </footer>

    <!-- åŠ è½½JavaScriptæ–‡ä»¶ -->
    <script src="../assets/js/theme-toggle.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/search.js"></script>
    <script src="../assets/js/navigation.js"></script>
    
    <script>
        // æ–‡æ¡£é…ç½®å’Œå…ƒæ•°æ®ç®¡ç†
        let DOC_CONFIG = null;
        let ALL_DOCS = [];
        let FOLDER_DOCS = [];
        let CURRENT_FOLDER = '';
        let SEARCH_HISTORY = [];
        let IS_GRID_VIEW = true;
        
        // ä¸»åˆ†ç±»é…ç½®
        const MAIN_CATEGORIES = {
            '0-å¼€å§‹': {
                title: 'å¼€å§‹',
                description: 'é€‚åˆåˆå­¦è€…çš„åŸºç¡€æ•™ç¨‹',
                order: 1
            },
            '1-åŸºç¡€': {
                title: 'åŸºç¡€',
                description: 'æœ‰ä¸€å®šåŸºç¡€åçš„è¿›é˜¶æ•™ç¨‹',
                order: 2
            },
            '2-ä¸­é˜¶': {
                title: 'ä¸­é˜¶',
                description: 'é¢å‘æœ‰ç»éªŒå¼€å‘è€…çš„é«˜çº§æ•™ç¨‹',
                order: 3
            },
            '3-é«˜é˜¶': {
                title: 'é«˜é˜¶',
                description: 'é«˜çº§å¼€å‘æŠ€å·§å’Œä¼˜åŒ–',
                order: 4
            },
            '4-ä¸“å®¶': {
                title: 'ä¸“å®¶',
                description: 'ä¸“å®¶çº§å¼€å‘æŠ€å·§',
                order: 5
            },
            // å…¼å®¹å¤–éƒ¨é¡¹ç›®çš„æ—§åˆ†ç±»
            'å…¥é—¨': {
                title: 'å…¥é—¨',
                description: 'é€‚åˆåˆå­¦è€…çš„åŸºç¡€æ•™ç¨‹',
                order: 1
            },
            'è¿›é˜¶': {
                title: 'è¿›é˜¶',
                description: 'æœ‰ä¸€å®šåŸºç¡€åçš„è¿›é˜¶æ•™ç¨‹',
                order: 2
            },
            'é«˜çº§': {
                title: 'é«˜çº§',
                description: 'é¢å‘æœ‰ç»éªŒå¼€å‘è€…çš„é«˜çº§æ•™ç¨‹',
                order: 3
            },
            'ä¸ªäººåˆ†äº«': {
                title: 'ä¸ªäººåˆ†äº«',
                description: 'ç¤¾åŒºæˆå‘˜çš„ä¸ªäººç»éªŒå’ŒæŠ€å·§åˆ†äº«',
                order: 4
            }
        };
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== docs/folder-enhanced.html: é¡µé¢åŠ è½½å®Œæˆ ===');
            
            // åˆå§‹åŒ–ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
            const themeToggle = new ThemeToggle({
                targetSelector: '.main-nav .nav-list',
                position: 'last' // ä½œä¸ºå¯¼èˆªèœå•çš„æœ€åä¸€é¡¹
            });
            themeToggle.init();
            
            // åˆå§‹åŒ–ç§»åŠ¨ç«¯èœå•
            initMobileMenu();
            
            // åŠ è½½æœç´¢å†å²
            loadSearchHistory();
            
            // è·å–URLå‚æ•°ä¸­çš„æ–‡ä»¶å¤¹è·¯å¾„
            const folderPath = getFolderPathFromURL();
            CURRENT_FOLDER = folderPath;
            
            // åˆå§‹åŒ–æ–‡æ¡£é…ç½®
            initializeDocumentConfig().then(() => {
                // ç­›é€‰å½“å‰æ–‡ä»¶å¤¹çš„æ–‡æ¡£
                filterDocumentsByFolder(folderPath);
                
                // ç”Ÿæˆé¢åŒ…å±‘å¯¼èˆª
                generateBreadcrumb(folderPath);
                
                // ç”Ÿæˆæ–‡ä»¶å¤¹æ ‡é¢˜å’Œæè¿°
                generateFolderHeader(folderPath);
                
                // å¡«å……è¿‡æ»¤å™¨é€‰é¡¹
                populateFilterOptions();
                
                // ç”Ÿæˆæ–‡æ¡£åˆ—è¡¨
                generateDocumentGrid();
                
                // åˆå§‹åŒ–æœç´¢åŠŸèƒ½
                initSearchFunctionality();
                
                // åˆå§‹åŒ–è¿‡æ»¤å™¨åŠŸèƒ½
                initFilterFunctionality();
                
                // åˆå§‹åŒ–è§†å›¾åˆ‡æ¢åŠŸèƒ½
                initViewToggleFunctionality();
                
                // åˆå§‹åŒ–é«˜çº§æœç´¢åŠŸèƒ½
                initAdvancedSearchFunctionality();
            });
        });

        // ä»URLå‚æ•°è·å–æ–‡ä»¶å¤¹è·¯å¾„
        function getFolderPathFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('path') || '';
        }

        // åˆå§‹åŒ–æ–‡æ¡£é…ç½®
        async function initializeDocumentConfig() {
            try {
                // å°è¯•åŠ è½½é…ç½®æ–‡ä»¶
                const configResponse = await fetch('./config.json');
                if (configResponse.ok) {
                    DOC_CONFIG = await configResponse.json();
                    console.log('æˆåŠŸåŠ è½½é…ç½®æ–‡ä»¶:', DOC_CONFIG);
                } else {
                    console.warn('é…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä½¿ç”¨é»˜è®¤é…ç½®');
                    DOC_CONFIG = generateDefaultConfig();
                }
            } catch (error) {
                console.warn('åŠ è½½é…ç½®æ–‡ä»¶å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®:', error);
                DOC_CONFIG = generateDefaultConfig();
            }
            
            // ä»é…ç½®æ–‡ä»¶åŠ è½½æ–‡æ¡£åˆ—è¡¨
            await loadDocumentsFromConfig();
        }

        // ç”Ÿæˆé»˜è®¤é…ç½®ï¼ˆå½“config.jsonä¸å­˜åœ¨æ—¶ï¼‰
        function generateDefaultConfig() {
            const config = {
                categories: {},
                topics: {},
                authors: {},
                all_files: []
            };
            
            // åˆå§‹åŒ–åˆ†ç±»ç»“æ„
            Object.keys(MAIN_CATEGORIES).forEach(categoryKey => {
                config.categories[categoryKey] = {
                    title: MAIN_CATEGORIES[categoryKey].title,
                    description: MAIN_CATEGORIES[categoryKey].description,
                    topics: {}
                };
            });
            
            return config;
        }

        // ä»é…ç½®æ–‡ä»¶åŠ è½½æ–‡æ¡£åˆ—è¡¨
        async function loadDocumentsFromConfig() {
            try {
                // é¦–å…ˆå°è¯•ä»é…ç½®æ–‡ä»¶åŠ è½½æ–‡æ¡£åˆ—è¡¨
                if (DOC_CONFIG && DOC_CONFIG.all_files && DOC_CONFIG.all_files.length > 0) {
                    console.log('ä»é…ç½®æ–‡ä»¶åŠ è½½æ–‡æ¡£åˆ—è¡¨');
                    ALL_DOCS = [...DOC_CONFIG.all_files];
                    
                    // ç¡®ä¿æ¯ä¸ªæ–‡æ¡£éƒ½æœ‰å¿…è¦çš„å­—æ®µ
                    ALL_DOCS = ALL_DOCS.map(doc => ({
                        filename: doc.filename,
                        title: doc.title || doc.filename.replace('.md', ''),
                        author: doc.author || 'æœªçŸ¥',
                        category: doc.category || 'å…¥é—¨',
                        topic: doc.topic || 'mod-basics',
                        order: parseInt(doc.order) || 999,
                        description: doc.description || '',
                        tags: doc.tags || [],
                        last_updated: doc.last_updated || 'æœªçŸ¥',
                        difficulty: doc.difficulty || 'beginner',
                        path: doc.path || doc.filename
                    }));
                    
                    console.log('ä»é…ç½®æ–‡ä»¶åŠ è½½çš„æ–‡æ¡£:', ALL_DOCS);
                    return;
                }
            } catch (error) {
                console.error('ä»é…ç½®æ–‡ä»¶åŠ è½½æ–‡æ¡£å¤±è´¥:', error);
                ALL_DOCS = [];
            }
        }

        // æ ¹æ®æ–‡ä»¶å¤¹è·¯å¾„ç­›é€‰æ–‡æ¡£
        function filterDocumentsByFolder(folderPath) {
            if (!folderPath) {
                console.warn('æœªæä¾›æ–‡ä»¶å¤¹è·¯å¾„');
                FOLDER_DOCS = [...ALL_DOCS]; // å¦‚æœæ²¡æœ‰æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ–‡æ¡£
                return;
            }
            
            console.log(`ç­›é€‰æ–‡ä»¶å¤¹ "${folderPath}" ä¸‹çš„æ–‡æ¡£`);
            
            // ç­›é€‰è·¯å¾„åŒ…å«æŒ‡å®šæ–‡ä»¶å¤¹çš„æ–‡æ¡£
            FOLDER_DOCS = ALL_DOCS.filter(doc => {
                if (!doc.path) return false;
                
                // æ£€æŸ¥è·¯å¾„æ˜¯å¦åŒ…å«æŒ‡å®šçš„æ–‡ä»¶å¤¹è·¯å¾„
                const pathParts = doc.path.split('/');
                return pathParts.includes(folderPath);
            });
            
            console.log(`æ‰¾åˆ° ${FOLDER_DOCS.length} ä¸ªæ–‡æ¡£:`, FOLDER_DOCS);
        }

        // ç”Ÿæˆé¢åŒ…å±‘å¯¼èˆª
        function generateBreadcrumb(folderPath) {
            const breadcrumb = document.getElementById('breadcrumb');
            
            if (!breadcrumb) return;
            
            breadcrumb.innerHTML = '';
            
            // é¦–é¡µé“¾æ¥
            const homeItem = document.createElement('div');
            homeItem.className = 'breadcrumb-item';
            homeItem.innerHTML = '<a href="../index.html">é¦–é¡µ</a>';
            breadcrumb.appendChild(homeItem);
            
            // æ–‡æ¡£é¦–é¡µé“¾æ¥
            const docsItem = document.createElement('div');
            docsItem.className = 'breadcrumb-item';
            docsItem.innerHTML = '<a href="index.html">æ–‡æ¡£</a>';
            breadcrumb.appendChild(docsItem);
            
            // å½“å‰æ–‡ä»¶å¤¹
            if (folderPath) {
                const folderItem = document.createElement('div');
                folderItem.className = 'breadcrumb-item active';
                folderItem.textContent = folderPath;
                breadcrumb.appendChild(folderItem);
            }
        }

        // ç”Ÿæˆæ–‡ä»¶å¤¹æ ‡é¢˜å’Œæè¿°
        function generateFolderHeader(folderPath) {
            const folderHeader = document.getElementById('folder-header');
            
            if (!folderHeader) return;
            
            if (!folderPath) {
                folderHeader.innerHTML = `
                    <h2 class="folder-title">æ‰€æœ‰æ–‡æ¡£</h2>
                    <p class="folder-description">æµè§ˆæ‰€æœ‰å¯ç”¨çš„æ–‡æ¡£ï¼Œå¿«é€Ÿæ‰¾åˆ°æ‚¨éœ€è¦çš„å­¦ä¹ èµ„æº</p>
                `;
                return;
            }
            
            // å°è¯•ä»é…ç½®ä¸­è·å–æ–‡ä»¶å¤¹ä¿¡æ¯
            let folderDescription = '';
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯åˆ†ç±»åç§°
            if (DOC_CONFIG.categories && DOC_CONFIG.categories[folderPath]) {
                folderDescription = DOC_CONFIG.categories[folderPath].description || '';
            }
            
            // ç”Ÿæˆæ–‡ä»¶å¤¹æ ‡é¢˜å’Œæè¿°
            folderHeader.innerHTML = `
                <h2 class="folder-title">${folderPath}</h2>
                <p class="folder-description">${folderDescription || `æµè§ˆ "${folderPath}" æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡æ¡£`}</p>
            `;
        }

        // å¡«å……è¿‡æ»¤å™¨é€‰é¡¹
        function populateFilterOptions() {
            // å¡«å……åˆ†ç±»è¿‡æ»¤å™¨
            const categoryFilter = document.getElementById('category-filter');
            if (categoryFilter && DOC_CONFIG.categories) {
                Object.keys(DOC_CONFIG.categories).forEach(categoryKey => {
                    const option = document.createElement('option');
                    option.value = categoryKey;
                    option.textContent = DOC_CONFIG.categories[categoryKey].title;
                    categoryFilter.appendChild(option);
                });
            }
            
            // å¡«å……ä½œè€…è¿‡æ»¤å™¨
            const authorFilter = document.getElementById('author-filter');
            if (authorFilter) {
                const authors = [...new Set(ALL_DOCS.map(doc => doc.author))];
                authors.sort().forEach(author => {
                    const option = document.createElement('option');
                    option.value = author;
                    option.textContent = author;
                    authorFilter.appendChild(option);
                });
            }
        }

        // ç”Ÿæˆæ–‡æ¡£åˆ—è¡¨
        function generateDocumentGrid(docs = FOLDER_DOCS) {
            const docGrid = document.getElementById('doc-grid');
            const noDocs = document.getElementById('no-docs');
            
            if (!docGrid || !noDocs) return;
            
            // æ¸…ç©ºç°æœ‰å†…å®¹
            docGrid.innerHTML = '';
            
            if (docs.length === 0) {
                // æ˜¾ç¤ºæ— æ–‡æ¡£æç¤º
                docGrid.style.display = 'none';
                noDocs.style.display = 'block';
                return;
            }
            
            // æ˜¾ç¤ºæ–‡æ¡£ç½‘æ ¼
            docGrid.style.display = 'grid';
            noDocs.style.display = 'none';
            
            // æŒ‰æ’åºå­—æ®µæ’åºæ–‡æ¡£
            const sortFilter = document.getElementById('sort-filter');
            let sortField = 'order';
            if (sortFilter) {
                sortField = sortFilter.value;
            }
            
            const sortedDocs = [...docs].sort((a, b) => {
                if (sortField === 'title') {
                    return a.title.localeCompare(b.title);
                } else if (sortField === 'author') {
                    return a.author.localeCompare(b.author);
                } else if (sortField === 'last_updated') {
                    return b.last_updated.localeCompare(a.last_updated);
                } else {
                    return a.order - b.order;
                }
            });
            
            // ç”Ÿæˆæ–‡æ¡£å¡ç‰‡
            sortedDocs.forEach(doc => {
                const docCard = document.createElement('div');
                docCard.className = 'doc-card';
                
                const difficultyClass = doc.difficulty === 'all' ? 'beginner' : doc.difficulty;
                const difficultyText = getDifficultyText(doc.difficulty);
                
                // ç”Ÿæˆæ ‡ç­¾HTML
                let tagsHtml = '';
                if (doc.tags && doc.tags.length > 0) {
                    tagsHtml = doc.tags.map(tag => `<span class="doc-tag">${tag}</span>`).join('');
                }
                
                docCard.innerHTML = `
                    <div class="doc-card-header">
                        <h3 class="doc-title">${doc.title}</h3>
                        <div class="doc-meta">
                            <div class="doc-meta-item">
                                <span class="difficulty-badge ${difficultyClass}">${difficultyText}</span>
                            </div>
                            <div class="doc-meta-item">
                                <span>ğŸ‘¤ ${doc.author}</span>
                            </div>
                            <div class="doc-meta-item">
                                <span>ğŸ“… ${doc.last_updated}</span>
                            </div>
                        </div>
                    </div>
                    <div class="doc-card-body">
                        <p class="doc-description">${doc.description || 'æš‚æ— æè¿°'}</p>
                        ${tagsHtml ? `<div class="doc-tags">${tagsHtml}</div>` : ''}
                    </div>
                    <div class="doc-card-footer">
                        <div class="doc-author">ä½œè€…: ${doc.author}</div>
                        <a href="viewer.html?file=${doc.path}" class="doc-link">æŸ¥çœ‹æ–‡æ¡£</a>
                    </div>
                `;
                
                docGrid.appendChild(docCard);
            });
        }

        // è·å–éš¾åº¦æ–‡æœ¬
        function getDifficultyText(difficulty) {
            const difficultyMap = {
                'beginner': 'åˆçº§',
                'intermediate': 'ä¸­çº§',
                'advanced': 'é«˜çº§',
                'all': 'å…¨éƒ¨çº§åˆ«'
            };
            return difficultyMap[difficulty] || difficulty;
        }

        // åˆå§‹åŒ–æœç´¢åŠŸèƒ½
        function initSearchFunctionality() {
            const searchInput = document.getElementById('doc-search');
            const searchButton = document.getElementById('search-btn');
            const searchResults = document.getElementById('search-results');
            
            if (!searchInput || !searchButton || !searchResults) return;
            
            // æœç´¢è¾“å…¥äº‹ä»¶
            searchInput.addEventListener('input', function() {
                const query = this.value.trim().toLowerCase();
                
                if (query.length === 0) {
                    // æ˜¾ç¤ºæ‰€æœ‰æ–‡æ¡£
                    applyFilters();
                    searchResults.style.display = 'none';
                    return;
                }
                
                // è¿‡æ»¤æœç´¢ç»“æœ
                const results = FOLDER_DOCS.filter(doc =>
                    doc.title.toLowerCase().includes(query) ||
                    doc.author.toLowerCase().includes(query) ||
                    (doc.description && doc.description.toLowerCase().includes(query)) ||
                    (doc.tags && doc.tags.some(tag => tag.toLowerCase().includes(query)))
                );
                
                // æ˜¾ç¤ºæœç´¢ç»“æœ
                displaySearchResults(results);
                applyFilters(results);
            });
            
            // æœç´¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            searchButton.addEventListener('click', function() {
                const query = searchInput.value.trim();
                if (query) {
                    performSearch(query);
                }
            });
            
            // æœç´¢è¾“å…¥æ¡†å›è½¦äº‹ä»¶
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const query = this.value.trim();
                    if (query) {
                        performSearch(query);
                    }
                }
            });
            
            // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­æœç´¢ç»“æœ
            document.addEventListener('click', function(e) {
                if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
                    searchResults.style.display = 'none';
                }
            });
            
            // æ˜¾ç¤ºæœç´¢ç»“æœ
            function displaySearchResults(results) {
                searchResults.innerHTML = '';
                
                if (results.length === 0) {
                    searchResults.innerHTML = `
                        <div class="search-result-item">
                            <div class="search-result-title">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–‡æ¡£</div>
                            <div class="search-result-meta">è¯·å°è¯•å…¶ä»–å…³é”®è¯</div>
                        </div>
                    `;
                } else {
                    results.forEach(result => {
                        const resultItem = document.createElement('div');
                        resultItem.className = 'search-result-item';
                        
                        resultItem.innerHTML = `
                            <div class="search-result-title">${result.title}</div>
                            <div class="search-result-meta">ä½œè€…: ${result.author} | æ›´æ–°: ${result.last_updated}</div>
                        `;
                        
                        resultItem.addEventListener('click', function() {
                            window.location.href = `viewer.html?file=${result.path}`;
                        });
                        
                        searchResults.appendChild(resultItem);
                    });
                }
                
                searchResults.style.display = 'block';
            }
            
            // æ‰§è¡Œæœç´¢
            function performSearch(query) {
                // æ·»åŠ åˆ°æœç´¢å†å²
                addToSearchHistory(query);
                
                const results = FOLDER_DOCS.filter(doc =>
                    doc.title.toLowerCase().includes(query.toLowerCase()) ||
                    doc.author.toLowerCase().includes(query.toLowerCase()) ||
                    (doc.description && doc.description.toLowerCase().includes(query.toLowerCase())) ||
                    (doc.tags && doc.tags.some(tag => tag.toLowerCase().includes(query.toLowerCase())))
                );
                
                if (results.length === 0) {
                    alert('æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–‡æ¡£ï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯');
                } else if (results.length === 1) {
                    // å¦‚æœåªæœ‰ä¸€ä¸ªç»“æœï¼Œç›´æ¥è·³è½¬
                    window.location.href = `viewer.html?file=${results[0].path}`;
                } else {
                    // å¦‚æœæœ‰å¤šä¸ªç»“æœï¼Œæ›´æ–°æ–‡æ¡£ç½‘æ ¼
                    applyFilters(results);
                    searchInput.value = query;
                }
            }
        }

        // åˆå§‹åŒ–è¿‡æ»¤å™¨åŠŸèƒ½
        function initFilterFunctionality() {
            const difficultyFilter = document.getElementById('difficulty-filter');
            const categoryFilter = document.getElementById('category-filter');
            const authorFilter = document.getElementById('author-filter');
            const sortFilter = document.getElementById('sort-filter');
            
            // ä¸ºæ‰€æœ‰è¿‡æ»¤å™¨æ·»åŠ å˜åŒ–äº‹ä»¶ç›‘å¬å™¨
            [difficultyFilter, categoryFilter, authorFilter, sortFilter].forEach(filter => {
                if (filter) {
                    filter.addEventListener('change', function() {
                        applyFilters();
                    });
                }
            });
        }

        // åº”ç”¨è¿‡æ»¤å™¨
        function applyFilters(docs = FOLDER_DOCS) {
            const difficultyFilter = document.getElementById('difficulty-filter');
            const categoryFilter = document.getElementById('category-filter');
            const authorFilter = document.getElementById('author-filter');
            
            let filteredDocs = [...docs];
            
            // åº”ç”¨éš¾åº¦è¿‡æ»¤å™¨
            if (difficultyFilter && difficultyFilter.value !== 'all') {
                filteredDocs = filteredDocs.filter(doc => doc.difficulty === difficultyFilter.value);
            }
            
            // åº”ç”¨åˆ†ç±»è¿‡æ»¤å™¨
            if (categoryFilter && categoryFilter.value !== 'all') {
                filteredDocs = filteredDocs.filter(doc => doc.category === categoryFilter.value);
            }
            
            // åº”ç”¨ä½œè€…è¿‡æ»¤å™¨
            if (authorFilter && authorFilter.value !== 'all') {
                filteredDocs = filteredDocs.filter(doc => doc.author === authorFilter.value);
            }
            
            // æ›´æ–°æ–‡æ¡£ç½‘æ ¼
            generateDocumentGrid(filteredDocs);
        }

        // åˆå§‹åŒ–è§†å›¾åˆ‡æ¢åŠŸèƒ½
        function initViewToggleFunctionality() {
            const gridViewBtn = document.getElementById('grid-view-btn');
            const listViewBtn = document.getElementById('list-view-btn');
            const docGrid = document.getElementById('doc-grid');
            
            if (!gridViewBtn || !listViewBtn || !docGrid) return;
            
            // ç½‘æ ¼è§†å›¾æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            gridViewBtn.addEventListener('click', function() {
                IS_GRID_VIEW = true;
                docGrid.classList.remove('list-view');
                gridViewBtn.classList.add('active');
                listViewBtn.classList.remove('active');
                
                // ä¿å­˜è§†å›¾åå¥½
                localStorage.setItem('folder-view-preference', 'grid');
            });
            
            // åˆ—è¡¨è§†å›¾æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            listViewBtn.addEventListener('click', function() {
                IS_GRID_VIEW = false;
                docGrid.classList.add('list-view');
                listViewBtn.classList.add('active');
                gridViewBtn.classList.remove('active');
                
                // ä¿å­˜è§†å›¾åå¥½
                localStorage.setItem('folder-view-preference', 'list');
            });
            
            // æ¢å¤è§†å›¾åå¥½
            const viewPreference = localStorage.getItem('folder-view-preference');
            if (viewPreference === 'list') {
                listViewBtn.click();
            }
        }

        // åˆå§‹åŒ–é«˜çº§æœç´¢åŠŸèƒ½
        function initAdvancedSearchFunctionality() {
            const advancedSearchToggleBtn = document.getElementById('advanced-search-toggle-btn');
            const advancedSearchOptions = document.getElementById('advanced-search-options');
            const advancedSearchBtn = document.getElementById('advanced-search-btn');
            
            if (!advancedSearchToggleBtn || !advancedSearchOptions || !advancedSearchBtn) return;
            
            // åˆ‡æ¢é«˜çº§æœç´¢é€‰é¡¹æ˜¾ç¤º
            advancedSearchToggleBtn.addEventListener('click', function() {
                advancedSearchOptions.classList.toggle('active');
                this.textContent = advancedSearchOptions.classList.contains('active') 
                    ? 'éšè—é«˜çº§æœç´¢é€‰é¡¹' 
                    : 'é«˜çº§æœç´¢é€‰é¡¹';
            });
            
            // æ‰§è¡Œé«˜çº§æœç´¢
            advancedSearchBtn.addEventListener('click', function() {
                performAdvancedSearch();
            });
        }

        // æ‰§è¡Œé«˜çº§æœç´¢
        function performAdvancedSearch() {
            const titleSearch = document.getElementById('title-search').value.trim().toLowerCase();
            const contentSearch = document.getElementById('content-search').value.trim().toLowerCase();
            const tagSearch = document.getElementById('tag-search').value.trim().toLowerCase();
            const dateFrom = document.getElementById('date-from').value;
            const dateTo = document.getElementById('date-to').value;
            
            let results = [...FOLDER_DOCS];
            
            // åº”ç”¨æ ‡é¢˜è¿‡æ»¤å™¨
            if (titleSearch) {
                results = results.filter(doc => doc.title.toLowerCase().includes(titleSearch));
            }
            
            // åº”ç”¨å†…å®¹è¿‡æ»¤å™¨ï¼ˆè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦å…¨æ–‡æœç´¢ï¼‰
            if (contentSearch) {
                results = results.filter(doc => 
                    (doc.description && doc.description.toLowerCase().includes(contentSearch))
                );
            }
            
            // åº”ç”¨æ ‡ç­¾è¿‡æ»¤å™¨
            if (tagSearch) {
                results = results.filter(doc => 
                    doc.tags && doc.tags.some(tag => tag.toLowerCase().includes(tagSearch))
                );
            }
            
            // åº”ç”¨æ—¥æœŸè¿‡æ»¤å™¨
            if (dateFrom) {
                results = results.filter(doc => doc.last_updated >= dateFrom);
            }
            
            if (dateTo) {
                results = results.filter(doc => doc.last_updated <= dateTo);
            }
            
            // æ›´æ–°æ–‡æ¡£ç½‘æ ¼
            generateDocumentGrid(results);
            
            // å¦‚æœæ²¡æœ‰ç»“æœï¼Œæ˜¾ç¤ºæç¤º
            if (results.length === 0) {
                const noDocs = document.getElementById('no-docs');
                if (noDocs) {
                    noDocs.style.display = 'block';
                    noDocs.querySelector('h3').textContent = 'æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–‡æ¡£';
                    noDocs.querySelector('p').textContent = 'æ²¡æœ‰æ‰¾åˆ°ä¸é«˜çº§æœç´¢æ¡ä»¶åŒ¹é…çš„æ–‡æ¡£ï¼Œè¯·å°è¯•å…¶ä»–æ¡ä»¶ã€‚';
                }
            }
        }

        // åŠ è½½æœç´¢å†å²
        function loadSearchHistory() {
            try {
                const history = localStorage.getItem('folder-search-history');
                if (history) {
                    SEARCH_HISTORY = JSON.parse(history);
                    displaySearchHistory();
                }
            } catch (error) {
                console.warn('æ— æ³•åŠ è½½æœç´¢å†å²:', error);
                SEARCH_HISTORY = [];
            }
        }

        // æ˜¾ç¤ºæœç´¢å†å²
        function displaySearchHistory() {
            const searchHistoryContainer = document.getElementById('search-history');
            if (!searchHistoryContainer || SEARCH_HISTORY.length === 0) return;
            
            const historyTitle = searchHistoryContainer.querySelector('.search-history-title');
            searchHistoryContainer.innerHTML = '';
            searchHistoryContainer.appendChild(historyTitle);
            
            // åªæ˜¾ç¤ºæœ€è¿‘5ä¸ªæœç´¢å†å²
            const recentHistory = SEARCH_HISTORY.slice(-5).reverse();
            
            recentHistory.forEach(query => {
                const historyItem = document.createElement('div');
                historyItem.className = 'search-history-item';
                historyItem.textContent = query;
                
                historyItem.addEventListener('click', function() {
                    document.getElementById('doc-search').value = query;
                    performSearch(query);
                });
                
                searchHistoryContainer.appendChild(historyItem);
            });
        }

        // æ·»åŠ åˆ°æœç´¢å†å²
        function addToSearchHistory(query) {
            // ç§»é™¤å·²å­˜åœ¨çš„ç›¸åŒæŸ¥è¯¢
            SEARCH_HISTORY = SEARCH_HISTORY.filter(item => item !== query);
            
            // æ·»åŠ æ–°æŸ¥è¯¢åˆ°å¼€å¤´
            SEARCH_HISTORY.unshift(query);
            
            // é™åˆ¶å†å²è®°å½•æ•°é‡
            if (SEARCH_HISTORY.length > 10) {
                SEARCH_HISTORY = SEARCH_HISTORY.slice(0, 10);
            }
            
            // ä¿å­˜åˆ°localStorage
            try {
                localStorage.setItem('folder-search-history', JSON.stringify(SEARCH_HISTORY));
                displaySearchHistory();
            } catch (error) {
                console.warn('æ— æ³•ä¿å­˜æœç´¢å†å²:', error);
            }
        }
    </script>
</body>

</html>